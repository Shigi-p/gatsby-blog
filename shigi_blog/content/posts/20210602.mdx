---
title: Webpackをさわった Pugもさわった
date: 2021-06-02
tags:
  - 技術
bannar: ./book_nikkichou_diary.png
---

## ことの発端

ある日のお仕事中、build しても画像が build ファイルに書き出されない。webpack を 1 ミリも理解せずになぁなぁで走らせていた僕は webpack をちょっと勉強してみようと思い試してみる。ついでに pug のことも何一つ知らない。彼が何者でどうやってビルドされて html になっているのか皆目検討もつかない。

我々はその謎を解明すべく、アマゾンの奥地へ向かわず Google 検索を繰り返した。

## ハマったところ

### nodenv の npm での global コマンド系

理由はわからないが nodenv の npm のグローバルで install した時にパス通らない。  
`.anyenv/envs/nodenv/shims/`下にコマンド一覧が入っている様子で、そこになければ無いですね。  
`nodenv rehash`で読み込み直してダメだったらまた調べてほしい未来の自分

### webpack5 系の loader と webpack4 系の loader とかそのへん

1. pug をぶちこんだ
2. pug-loader を入れて単一のファイルは変換できた
3. 大量の pug ファイルを html に変換したくなった
4. webpack-route-data-mapper をぶちこんだ
5. webpack5 系では動かない ←！？
6. バージョン関係をいじくりまわす
7. webpack4 系では assets-module じゃなくて file-loader が必要なことを思い出す
8. 仕方なく 4 系に戻す ← 今ここ
