---
title: "レイアウトの変更があってもスクロール位置を記憶する、スクロールアンカリングという存在（途中で諦め）"
date: 2024-01-22
tags:
  - 技術
banner: ./book_nikkichou_diary.png
slug: "/2024-01-22"
---

- [Introduction](##introduction)
- [スクロールアンカリング](##スクロールアンカリング)
- 
# Introduction

「画面の最下部にあるアコーディオンの要素を開いた時、開いたことが分かりづらいので開いたときにコンテンツ部分までスクロールしたい」というとき、よくありますよね

きっとscrollIntoView等でスクロールの処理を入れて、開く分には問題ないと思います

……が、アコーディオンを開く、閉じる、また開く、の挙動をするとガクガクッと変にスクロールしてしまうときがありませんでしょうか。

なんでだ？と思って調べました。

# スクロールアンカリング

これ、スクロール位置を記憶してレイアウトの変更があってもそこに自動的に戻るようにしているんじゃないか？と思い調査。

どうやらスクロールアンカリングというものがそれを行ってくれている様子

[スクロールアンカリングの紹介 - CSS: カスケーディングスタイルシート | MDN](https://developer.mozilla.org/ja/docs/Web/CSS/overflow-anchor/Guide_to_scroll_anchoring)

> ウェブのユーザーであれば、おそらくスクロールアンカリングが解決する問題をよく知っているはずです。
> 

存じませんでした。

> スクロールアンカリングは、表示域 (viewport) 外で起こった変化に対し、スクロール位置を調整する機能です。つまり、文書内のスクロール位置が実際には変わっているのにもかかわらず、ユーザーが見ていた個所が表示域に留まり続けます。
> 

アコーディオンのように、内容物がどわーっとレイアウトの変更を引き起こすものだった場合にコンテンツを優先させて読みやすくしてくれる、といった機能。

ただ、前述した「アコーディオンの先頭にスクロールしたい」という機能と重なってしまうと変なスクロールになってしまう
